services:
  postgres:
    restart: always
    mem_limit: 1g
    cpus: 1.0

  redis:
    restart: always
    mem_limit: 512m
    cpus: 0.5

  flyway:
    restart: "no"

  api:
    restart: always
    environment:
      SPRING_PROFILES_ACTIVE: prod
      IDP_HTTPS_ONLY: "true"
      IDP_FAIL_FAST_SECRETS: "true"
    mem_limit: 1g
    cpus: 1.5

  web:
    restart: always
    mem_limit: 768m
    cpus: 1.0
    ports:
      - "${WEB_PORT}:3000"
